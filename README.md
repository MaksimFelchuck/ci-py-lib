# ci-py-lib
CI Python utilities library for CI purpose

Эта библиотека содержит набор Python утилит, предназначенных для использования в системах Continuous Integration.

## Использование библиотеки

Каждая утилита - это отдельный файл .py. Он может быть использован двумя способами:

1) как команда ОС, при этом параметры передаются через командную строку, код возврата 0 - означает успешное выполнение, не 0 - ошибку. В процессе работы утилита должна выводить в stdout/stderr информацию о ходе выполнения и диагностику ошибок, достаточную для отладки программы, которая использует данную утилиту. Функция, которая используется для запуска утилиты в этом режиме должна называться use_as_os_command, внутри себя разбирать командную строку и выполнять нужные действия;

2) как подключаемый модуль python, имя функции для вызова совпадает с именем скрипта, но могут быть и другие функции, которые должны быть документированы внутри самого модуля (см. ниже). Основная функция должна возвращать 0 в случае успеха, не 0 при ошибке. Функции, находящиеся внутри утилиты, но не предназначенные для вызова извне, должны оставаться локальными. Диагностика ошибочных ситуаций должна быть достаточной, чтобы можно было диагностировать ошибки по коду возврата основной функции (и дополнительных функций если это необходимо)

Все утилиты находятся в каталоге lib-utils репозитария. Для их использования достаточно забрать ветку master, и настроить конфигурацию в файле lib-utils\lib_config.py, пример которого можно взять из lib-utils\lib_config.py.sample.

Документация на утилиту находится внутри нее, и может быть получена как в командной строке, так и с помощью Pydoc:

\>python \<util_name\>.py -h | --help - для получения информации о том, как использовать утилиту из командной строки

\>python pydoc.py  .\\\<util_name\>.py - полная документация на утилиту

Документация на все утилиты находится в файле [lib-utils/py-lib-guide.html](lib-utils/py-lib-guide.html).

## Дополнительная информация

* Каждая утилита тестируется в момент сборки с помощью тестовых скриптов, которые находятся в данном репозитарии, но частью самих утилит не являются.
* Библиотека поддерживает обратную совместимость как минимум внутри мажорной версии.
* Библиотека является кросплафторменной.
* Инструкция для разработчиков библиотеки находится в файле [docs/devguide.md](docs/devguide.md) данного репозитария.
